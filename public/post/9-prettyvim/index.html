<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Markdown writing, Obsidian + Vim, not vim-mode | So</title><meta name=keywords content="vim,markdown,obsidian"><meta name=description content="Obsidian is a local note-taking apps, all the files are saved as .md or .pdf format. Vim or Neovim are great editors that allow you config all days without writing any real code
Obsidian has vim-mode, which support Vim modal editing out of the box. However, due to the font size is not unqiue in obsidian, Like the heading has bigger size, the code block is not at the beginning of the line."><meta name=author content="Sokinpui"><link rel=canonical href=https://sokinpui.github.io/Blog/post/9-prettyvim/><link crossorigin=anonymous href=/Blog/assets/css/stylesheet.min.d13dc9670c54a799901d8f51eb366234127600b84f76504283993a1e6bb2ffd7.css integrity="sha256-0T3JZwxUp5mQHY9R6zZiNBJ2ALhPdlBCg5k6Hmuy/9c=" rel="preload stylesheet" as=style><link rel=icon href=https://sokinpui.github.io/Blog/favicon.ico><link rel=apple-touch-icon href=https://sokinpui.github.io/Blog/apple-touch-icon.png><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Markdown writing, Obsidian + Vim, not vim-mode | So"><meta name=twitter:description content="Obsidian is a local note-taking apps, all the files are saved as .md or .pdf format. Vim or Neovim are great editors that allow you config all days without writing any real code
Obsidian has vim-mode, which support Vim modal editing out of the box. However, due to the font size is not unqiue in obsidian, Like the heading has bigger size, the code block is not at the beginning of the line."><meta property="og:title" content="Markdown writing, Obsidian + Vim, not vim-mode | So"><meta property="og:description" content="Obsidian is a local note-taking apps, all the files are saved as .md or .pdf format. Vim or Neovim are great editors that allow you config all days without writing any real code
Obsidian has vim-mode, which support Vim modal editing out of the box. However, due to the font size is not unqiue in obsidian, Like the heading has bigger size, the code block is not at the beginning of the line."><meta property="og:type" content="article"><meta property="og:url" content="https://sokinpui.github.io/Blog/post/9-prettyvim/"><meta property="og:image" content="https://sokinpui.github.io/Blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-06-30T10:25:46+08:00"><meta property="article:modified_time" content="2023-06-30T10:25:46+08:00"><meta property="og:site_name" content="So's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sokinpui.github.io/Blog/post/"},{"@type":"ListItem","position":2,"name":"Markdown writing, Obsidian + Vim, not vim-mode","item":"https://sokinpui.github.io/Blog/post/9-prettyvim/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Markdown writing, Obsidian + Vim, not vim-mode | So","name":"Markdown writing, Obsidian \u002b Vim, not vim-mode","description":"Obsidian is a local note-taking apps, all the files are saved as .md or .pdf format. Vim or Neovim are great editors that allow you config all days without writing any real code\nObsidian has vim-mode, which support Vim modal editing out of the box. However, due to the font size is not unqiue in obsidian, Like the heading has bigger size, the code block is not at the beginning of the line.","keywords":["vim","markdown","obsidian"],"wordCount":"681","inLanguage":"en","datePublished":"2023-06-30T10:25:46+08:00","dateModified":"2023-06-30T10:25:46+08:00","author":{"@type":"Person","name":"Sokinpui"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sokinpui.github.io/Blog/post/9-prettyvim/"},"publisher":{"@type":"Organization","name":"So","logo":{"@type":"ImageObject","url":"https://sokinpui.github.io/Blog/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8590906017442858" crossorigin=anonymous></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-post kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://sokinpui.github.io/Blog/ accesskey=h title="So (Alt + H)">So</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://sokinpui.github.io/Blog/archives/ title=Archives>Archives</a></li><li><a href=https://sokinpui.github.io/Blog/series/ title=Series>Series</a></li><li><a href=https://sokinpui.github.io/Blog/post/ title=Post class=active>Post</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sokinpui.github.io/Blog/>Home</a>&nbsp;Â»&nbsp;<a href=https://sokinpui.github.io/Blog/post/>Posts</a></div><h1 class=post-title>Markdown writing, Obsidian + Vim, not vim-mode</h1><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>June 30, 2023</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://sokinpui.github.io/Blog/tags/vim/>vim</a><a href=https://sokinpui.github.io/Blog/tags/markdown/>markdown</a><a href=https://sokinpui.github.io/Blog/tags/obsidian/>obsidian</a></span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>4 min</span></span></div></header><div class="toc side left"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#editing-in-vim aria-label="Editing in Vim">Editing in Vim</a></li><li><a href=#obsidian-the-markdown-viewer aria-label="Obsidian, the markdown viewer">Obsidian, the markdown viewer</a><ul><li><a href=#navigation-in-wrapped-line aria-label="Navigation in wrapped line">Navigation in wrapped line</a></li><li><a href=#psudo-wysiwyg aria-label="Psudo WYSIWYG">Psudo WYSIWYG</a></li></ul></li></ul></div></details></div><div class=post-content><p><a href=https://obsidian.md/>Obsidian</a> is a local note-taking apps, all the files are saved as <code>.md</code> or <code>.pdf</code> format.
<a href=https://www.vim.org/>Vim</a> or <a href=https://neovim.io/>Neovim</a> are great editors that allow you config all days without writing any real code</p><p>Obsidian has vim-mode, which support Vim modal editing out of the box. However, due to the font size is not unqiue in obsidian, Like the heading has bigger size, the code block is not at the beginning of the line. Sometimes got confused when using jk to move up and down, you move up may not be where you want to go. Vim modal editing editing works better with mono font, regardly, mono font has less readibility than non-mono font where obsidian used by default. What&rsquo;s more, obsidian vim-mode is not clone of vim, still implement as a vim emulation. You may have <a href=https://github.com/esm7/obsidian-vimrc-support>obsidian vimrc support plugin</a>, so to unlock the power of mapping in obsidian, but you still got a lot limitation. In terms of editing, a real Vim should be better than any vim-emulation, and in terms of notes-taking, any note-taking app should work better than Vim+shell, you don&rsquo;t have notes structure visualization without some extra tweaks.</p><h1 id=editing-in-vim>Editing in Vim<a hidden class=anchor aria-hidden=true href=#editing-in-vim>Â¶</a></h1><p>With Vim, you can have those convenience over obsidian:</p><ol><li>snippets</li><li>completion</li><li>The best &ldquo;Vim&rdquo; mode</li></ol><p>The last one should have no doubt. The reason I use snippets and completion in note-taking because I am lazy. Retype the same works again and again are really boring and meangless. Obsidian does have some plugins related to <a href=https://github.com/ArianaKhit/text-snippets-obsidian>snippets</a> and <a href=https://github.com/tadashi-aikawa/obsidian-various-complements-plugin>completion</a>, but setup snippets and completion is just easier and more consisent on Vim. In Vim you can have same UI interface and consisent keyblindings.
The plugins I use for snippets and completion are <a href=https://github.com/neoclide/coc.nvim>coc.nvim</a> + <a href=https://github.com/SirVer/ultisnips>Ultisnips</a> + <a href=https://github.com/neoclide/coc-snippets>coc.snippets</a>, choosing coc.nvim simply because it have provided solution for snippets together with completion out of the box. Of course, there is so much alternatives avalible. The only missing is the backlink completion. But it is fine, insert backlink in obsidian let me have a look of filenames, so that I won&rsquo;t forget the filename and suck typing.</p><p>Example configuration for snippets and completion:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Plug &#39;neoclide/coc.nvim&#39;, {&#39;branch&#39;: &#39;release&#39;}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&#34;   coc.nvim
</span></span><span class=line><span class=cl>inoremap &lt;silent&gt;&lt;expr&gt; &lt;TAB&gt; coc#pum#visible() 
</span></span><span class=line><span class=cl>      \ ? coc#pum#next(1) : 
</span></span><span class=line><span class=cl>      \ cocfunc#CheckBackspace() 
</span></span><span class=line><span class=cl>      \ ? &#34;\&lt;TAB&gt;&#34; : coc#refresh()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>inoremap &lt;expr&gt;&lt;S-TAB&gt; coc#pum#visible() 
</span></span><span class=line><span class=cl>      \ ? coc#pum#prev(1) : &#34;\&lt;S-TAB&gt;&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>inoremap &lt;silent&gt;&lt;expr&gt; &lt;CR&gt; coc#pum#visible() 
</span></span><span class=line><span class=cl>      \ ? &#34;\&lt;C-g&gt;u\&lt;CR&gt;\&lt;c-r&gt;=coc#pum#close()\&lt;CR&gt;&#34; 
</span></span><span class=line><span class=cl>      \ : &#34;\&lt;C-g&gt;u\&lt;CR&gt;\&lt;c-r&gt;=coc#on_enter()\&lt;CR&gt;&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>inoremap &lt;silent&gt;&lt;expr&gt; &lt;space&gt; coc#pum#visible() 
</span></span><span class=line><span class=cl>      \ ? &#34;&lt;esc&gt;a&lt;space&gt;&#34; : &#34;&lt;space&gt;&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&#34;   coc.snippets
</span></span><span class=line><span class=cl>inoremap &lt;C-j&gt; &lt;Plug&gt;(coc-snippets-expand-jump)
</span></span><span class=line><span class=cl>vnoremap &lt;C-j&gt; &lt;Plug&gt;(coc-snippets-select)
</span></span><span class=line><span class=cl>let g:coc_snippet_next = &#39;&lt;C-j&gt;&#39;
</span></span><span class=line><span class=cl>let g:coc_snippet_prev = &#39;&lt;C-k&gt;&#39;
</span></span></code></pre></div><p>coc.snippets need to be installed separately, after install coc.nvim, run the command <code>:CocInstall coc-snippets</code></p><h1 id=obsidian-the-markdown-viewer>Obsidian, the markdown viewer<a hidden class=anchor aria-hidden=true href=#obsidian-the-markdown-viewer>Â¶</a></h1><p>Insert image in markdown with plugins <a href=https://github.com/nicojeske/mousewheel-image-zoom>image resizer</a> and <a href=https://github.com/reorx/obsidian-paste-image-rename>imager inserter</a> is supar convenient, no doubt better than vim.</p><h2 id=navigation-in-wrapped-line>Navigation in wrapped line<a hidden class=anchor aria-hidden=true href=#navigation-in-wrapped-line>Â¶</a></h2><p>Since hard wrapped line will make paragraph look ugly in Obsidian, use soft wrapped line instead, which means one paragraph is actually a long long line. Some mapping will be handy to avoid keep using prefix <code>g</code> again in Vim.</p><p>Example configuration, in <code>~/.vim/ftplugin/markdown.vim:</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>setlocal textwidth=0 wrap formatoptions=tc2n linebreak
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>noremap &lt;buffer&gt; j gj
</span></span><span class=line><span class=cl>noremap &lt;buffer&gt; k gk
</span></span><span class=line><span class=cl>noremap &lt;buffer&gt; $ g$
</span></span><span class=line><span class=cl>noremap &lt;buffer&gt; ^ g^
</span></span><span class=line><span class=cl>noremap &lt;buffer&gt; 0 g0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nnoremap &lt;buffer&gt; dd g0vg$D
</span></span><span class=line><span class=cl>nnoremap &lt;buffer&gt; D g0vg$D
</span></span><span class=line><span class=cl>nnoremap &lt;buffer&gt; V g0vg$
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nnoremap &lt;buffer&gt; I g^i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>function! IsBlank()
</span></span><span class=line><span class=cl>    normal! g$
</span></span><span class=line><span class=cl>    var char = getline(&#34;.&#34;)[col(&#34;.&#34;) - 1]
</span></span><span class=line><span class=cl>    if char == &#34;\t&#34; || char == &#34; &#34;
</span></span><span class=line><span class=cl>        normal! gel
</span></span><span class=line><span class=cl>        startinsert
</span></span><span class=line><span class=cl>    else
</span></span><span class=line><span class=cl>        startinsert!
</span></span><span class=line><span class=cl>    endif
</span></span><span class=line><span class=cl>deffunction 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>nnoremap &lt;buffer&gt; A :call IsBlank()&lt;cr&gt;
</span></span></code></pre></div><p>The last one help you stop at the last non-blank character in wrapped line, the normal behavior of <code>g$a</code> will stop at the last character including space and tab, sometimes inconvenient.</p><h2 id=psudo-wysiwyg>Psudo WYSIWYG<a hidden class=anchor aria-hidden=true href=#psudo-wysiwyg>Â¶</a></h2><p>WYSIWYG, what you see is what you get, is one of the highlight of markdown syntax, very simple. To get half experience in Vim, oen can be turn on concealment. <code>set conceallevel=2</code> to convert highlight syntax into unicode character.</p><p>Just let better tools takes the jobs. For text editing, take Vim; For notes managment, take Obsidian; For complex data representaion like chart, embedded image and website page, just take any other tools like Notion.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://sokinpui.github.io/Blog/post/10/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Tmux key bndings less suffer</span></a>
<a class=next href=https://sokinpui.github.io/Blog/post/8-vimpluginrecommend/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>Vim plugin recommendation</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://sokinpui.github.io/Blog/>So</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span>
<span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/Blog/js/medium-zoom.min.js data-no-instant></script>
<script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script src=/Blog/js/instantclick.min.js data-no-instant></script>
<script data-no-instant>InstantClick.init()</script></body></html>