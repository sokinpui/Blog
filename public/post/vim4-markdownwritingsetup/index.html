<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Setup Markdown writing environment with zsh + Neovim | Home</title><meta name=keywords content><meta name=description content="Markdown setup make text editing become comfortable"><meta name=author content="sokinpui"><link rel=canonical href=https://canonical.url/to/page><link crossorigin=anonymous href=/Blog/assets/css/stylesheet.min.d13dc9670c54a799901d8f51eb366234127600b84f76504283993a1e6bb2ffd7.css integrity="sha256-0T3JZwxUp5mQHY9R6zZiNBJ2ALhPdlBCg5k6Hmuy/9c=" rel="preload stylesheet" as=style><link rel=icon href=https://sokinpui.github.io/Blog/favicon.ico><link rel=apple-touch-icon href=https://sokinpui.github.io/Blog/apple-touch-icon.png><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Setup Markdown writing environment with zsh + Neovim | Home"><meta name=twitter:description content="Markdown setup make text editing become comfortable"><meta property="og:title" content="Setup Markdown writing environment with zsh + Neovim | Home"><meta property="og:description" content="Markdown setup make text editing become comfortable"><meta property="og:type" content="article"><meta property="og:url" content="https://sokinpui.github.io/Blog/post/vim4-markdownwritingsetup/"><meta property="og:image" content="https://sokinpui.github.io/Blog/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-08-03T09:26:43+08:00"><meta property="article:modified_time" content="2023-08-03T09:26:43+08:00"><meta property="og:site_name" content="Home"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sokinpui.github.io/Blog/post/"},{"@type":"ListItem","position":2,"name":"Setup Markdown writing environment with zsh + Neovim","item":"https://sokinpui.github.io/Blog/post/vim4-markdownwritingsetup/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Setup Markdown writing environment with zsh + Neovim | Home","name":"Setup Markdown writing environment with zsh \u002b Neovim","description":"Markdown setup make text editing become comfortable","keywords":[""],"wordCount":"3972","inLanguage":"en","datePublished":"2023-08-03T09:26:43+08:00","dateModified":"2023-08-03T09:26:43+08:00","author":{"@type":"Person","name":"sokinpui"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sokinpui.github.io/Blog/post/vim4-markdownwritingsetup/"},"publisher":{"@type":"Organization","name":"Home","logo":{"@type":"ImageObject","url":"https://sokinpui.github.io/Blog/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css integrity=sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js integrity=sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-post kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://sokinpui.github.io/Blog/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://sokinpui.github.io/Blog/archives/ title=Archives>Archives</a></li><li><a href=https://sokinpui.github.io/Blog/series/ title=Series>Series</a></li><li><a href=https://sokinpui.github.io/Blog/post/ title=Post class=active>Post</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sokinpui.github.io/Blog/>Home</a>&nbsp;»&nbsp;<a href=https://sokinpui.github.io/Blog/post/>Posts</a></div><h1 class=post-title>Setup Markdown writing environment with zsh + Neovim</h1><div class=post-description>Markdown setup make text editing become comfortable</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>August 3, 2023</span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags></span></span><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>19 min</span></span></div></header><div class="toc side left"><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#before aria-label=Before>Before</a></li><li><a href=#choose-of-editor aria-label="Choose of editor">Choose of editor</a></li><li><a href=#setup-with-neovim aria-label="Setup with Neovim">Setup with Neovim</a><ul><li><a href=#jump-between-files aria-label="Jump between files">Jump between files</a></li><li><a href=#file-explorer aria-label="file explorer">file explorer</a></li><li><a href=#synatx-highlight aria-label="Synatx highlight">Synatx highlight</a></li><li><a href=#header-jumps aria-label="header jumps">header jumps</a></li><li><a href=#markdown-preview aria-label="Markdown preview">Markdown preview</a></li><li><a href=#image-clipboard-insertion aria-label="Image clipboard insertion">Image clipboard insertion</a></li><li><a href=#autocompletion aria-label=Autocompletion>Autocompletion</a></li><li><a href=#text-object-for-markdown aria-label="text object for markdown">text object for markdown</a></li></ul></li><li><a href=#zsh aria-label=zsh>zsh</a></li><li><a href=#may-not-helpful aria-label="May not helpful">May not helpful</a><ul><li><a href=#conceal aria-label=conceal>conceal</a></li><li><a href=#auto-list-in-vim aria-label="Auto list in vim">Auto list in vim</a></li><li><a href=#searching aria-label=Searching>Searching</a></li></ul></li><li><a href=#after aria-label=After>After</a></li></ul></div></details></div><div class=post-content><blockquote><p>update at Thu Aug 10 01:10:36 PM CST 2023, add plugin for text object</p></blockquote><blockquote><p>update at Mon Aug 14 01:05:19 PM CST 2023, tex_conceal</p></blockquote><p>Mainly Introduce Neovim plugins and share config that help markdown writing.</p><p>The Full config is <a href=https://github.com/sokinpui/dotfiles/tree/main/nvim>here</a></p><h1 id=before>Before<a hidden class=anchor aria-hidden=true href=#before>¶</a></h1><p>A good markdown setup just make fun easier, though the most weighted thing in writing should be the content instead of the tools you use. But a right tools will make editing a lot easier. Recently markdown can use for note taking, documenting, or blog writing. Markdown is similiar to HTML, but have a clear and readable syntax. Only looking at the syntax, you can already have idea how the file will be reandered. Compare to Tex, the syntax is simpler but less featured, if you don&rsquo;t need complicate layout of your output file, you should consider markdown first. You can use some simple $Latex$ math expression like <code>$\int$</code> in markdown, already well supported by most of markdown editor.</p><h1 id=choose-of-editor>Choose of editor<a hidden class=anchor aria-hidden=true href=#choose-of-editor>¶</a></h1><p>Oh, accidently involved to editor war, which editor you prefer? BTW, I use Neovim. There is two type editor, one is designed only for markdown, another are designed for general purpose. In my opinion, most of markdown editor, like <strong>Typora</strong>, or note editor but can also use as a markdown editor like <strong>Obsidian</strong> or <strong>logseq</strong>, former provides good reading and editing experience by its <strong>What You see Is What You GET</strong>(WYSIWYG). Latter provides reference link/backlink feature. Both of them are great, nevertheless, as I have mentioned, markdown as a markup language, its syntax is so simple, a good live preview is quite useless. Backlink is useful, but only useful if you take notes, or try to manage your personal knowledge in another new way. I would still prefer a tree organization for my notes, as most of the knowledge I need is well organizated already. Referencing maybe helpful for writer who need brain storming or system like wiki, it is still hard to imagine who have the mental power to manage and navigate a complex inter-referencing system.</p><p>Most of the GUI markdown editor in terms of editing has not difference compare to the default &ldquo;Text Edit&rdquo; application of your OS. They may provide some mardkwon syntax allowing you click to insert via mouse, as mentioned above, markdown syntax is so simple that anyone can learn it in one minutes, remember after using a few times. Insert with markdown syntax with mouse is, um &mldr; quite useless, I would say. In terms of editing, I think a general purpose editor may do a better job. Those &ldquo;general purpose editor&rdquo; have another name, code editor, I think any of VSCode, Emacs, Atom or Vim should be better in terms of editing, as they have so many features are for edit text! So pick whatever code editor you like! It is so personal choice, hard to recommend one. Hope this article can provide some idea that also works on yours.</p><p>Some features should have for comfortable markdown editing:</p><ol><li>Jump between files</li><li>Searching</li><li>File explorer</li><li>syntax highlighting
With above items, a comfortable writing environment have done half!</li></ol><h1 id=setup-with-neovim>Setup with Neovim<a hidden class=anchor aria-hidden=true href=#setup-with-neovim>¶</a></h1><p>Install those plugins with the manager you prefer. Since those plugins have more than markdown writing, The key mapping and functionality of them are not fully covered here, please check those plugins&rsquo; website to have more details.</p><details><summary>Install plugins with lazy.nvim</summary><p>Using <a href=https://github.com/folke/lazy.nvim>lavy.nvim</a>, we first add those line to init.lua:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>---lazy.nvim</span>
</span></span><span class=line><span class=cl><span class=c1>---install plugin if missed</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>lazypath</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>stdpath</span><span class=p>(</span><span class=s2>&#34;data&#34;</span><span class=p>)</span> <span class=o>..</span> <span class=s2>&#34;/lazy/lazy.nvim&#34;</span>
</span></span><span class=line><span class=cl><span class=kr>if</span> <span class=ow>not</span> <span class=n>vim.loop</span><span class=p>.</span><span class=n>fs_stat</span><span class=p>(</span><span class=n>lazypath</span><span class=p>)</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>  <span class=n>vim.fn</span><span class=p>.</span><span class=n>system</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;git&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;clone&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;--filter=blob:none&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;https://github.com/folke/lazy.nvim.git&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;--branch=stable&#34;</span><span class=p>,</span> <span class=c1>-- latest stable release</span>
</span></span><span class=line><span class=cl>    <span class=n>lazypath</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>vim.opt</span><span class=p>.</span><span class=n>rtp</span><span class=p>:</span><span class=n>prepend</span><span class=p>(</span><span class=n>lazypath</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>-- change you leader key here.</span>
</span></span><span class=line><span class=cl><span class=n>vim.g</span><span class=p>.</span><span class=n>mapleader</span> <span class=o>=</span> <span class=s2>&#34; &#34;</span>
</span></span></code></pre></div><p>Lazy.nvim recommend you modualize your configuration, make use of <code>lua/</code> directory in your vim runtimepath.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=o>[</span>so@fedora .config/nvim/lua<span class=o>]</span><span class=p>|</span>lua
</span></span><span class=line><span class=cl>» <span class=nb>pwd</span>
</span></span><span class=line><span class=cl>/home/so/.config/nvim/lua
</span></span><span class=line><span class=cl><span class=o>[</span>so@fedora .config/nvim/lua<span class=o>]</span><span class=p>|</span>lua
</span></span><span class=line><span class=cl>» tree
</span></span><span class=line><span class=cl>.
</span></span><span class=line><span class=cl>├── config
</span></span><span class=line><span class=cl>│   └── lualine.lua
</span></span><span class=line><span class=cl>├── lazy-init.lua
</span></span><span class=line><span class=cl>├── plugins
</span></span><span class=line><span class=cl>│   ├── appearance.lua
</span></span><span class=line><span class=cl>│   ├── autocompletion.lua
</span></span><span class=line><span class=cl>│   ├── cleverf.lua
</span></span><span class=line><span class=cl>│   ├── fern.lua
</span></span><span class=line><span class=cl>│   ├── fzf.lua
</span></span><span class=line><span class=cl>│   ├── lsp.lua
</span></span><span class=line><span class=cl>│   ├── markdown.lua
</span></span><span class=line><span class=cl>│   ├── multi_cursor.lua
</span></span><span class=line><span class=cl>│   ├── nerdfont.lua
</span></span><span class=line><span class=cl>│   ├── pairs.lua
</span></span><span class=line><span class=cl>│   ├── sandwich.lua
</span></span><span class=line><span class=cl>│   └── treesitter.lua
</span></span><span class=line><span class=cl>└── settings
</span></span><span class=line><span class=cl>    ├── appearance.lua
</span></span><span class=line><span class=cl>    ├── format.lua
</span></span><span class=line><span class=cl>    ├── mapping.lua
</span></span><span class=line><span class=cl>    └── setting.lua
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=m>4</span> directories, <span class=m>18</span> files
</span></span></code></pre></div><p>All the plugins config located at <code>plugins</code>, here is how you can load plugin with lazy.nvim in <code>init.lua</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>require</span><span class=p>(</span><span class=s2>&#34;lazy&#34;</span><span class=p>).</span><span class=n>setup</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.nerdfont&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.appearance&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.treesitter&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.cleverf&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.lsp&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.sandwich&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.multi_cursor&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.pairs&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.autocompletion&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.fzf&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.markdown&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;plugins.fern&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dstein64/vim-startuptime&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cmd</span> <span class=o>=</span> <span class=s2>&#34;StartupTime&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>},{})</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- ~/.config/nvim/lua/plugins/neoconf.lua</span>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;folke/neoconf.nvim&#34;</span><span class=p>,</span> <span class=n>cmd</span> <span class=o>=</span> <span class=s2>&#34;Neoconf&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;folke/neodev.nvim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>-- ~/.config/nvim/lua/plugins/cleverf.lua</span>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;rhysd/clever-f.vim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>keys</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;f&#34;</span><span class=p>,</span> <span class=s2>&#34;F&#34;</span><span class=p>,</span> <span class=s2>&#34;t&#34;</span><span class=p>,</span> <span class=s2>&#34;T&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>init</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>clever_f_smart_case</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>clever_f_across_no_line</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>clever_f_chars_match_any_signs</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=se>\t</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>clever_f_repeat_last_char_inputs</span> <span class=o>=</span> <span class=p>{</span> <span class=s1>&#39;</span><span class=se>\r</span><span class=s1>&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>clever_f_fix_key_direction</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>-- ~/.config/nvim/lua/plugins/fern.lua</span>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;lambdalisue/fern.vim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>keys</span> <span class=o>=</span> 
</span></span><span class=line><span class=cl>        <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;lambdalisue/fern-hijack.vim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;lambdalisue/fern-mapping-project-top.vim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;sokinpui/my-fern-preview.vim&#34;</span><span class=p>,</span>    
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=c1>-- Set the Fern plugin configuration options in Lua</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#mark_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;●&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#collapsed_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;▷ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#expanded_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;▼ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#leading&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#leaf_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#root_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;~ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_default_mappings&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_drawer_auto_quit&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_viewer_hide_cursor&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>-- Define the key mappings</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_set_keymap</span><span class=p>(</span><span class=s1>&#39;i&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;C-e&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;Esc&gt;:Fern . -drawer -reveal=% -width=35 -toggle&lt;CR&gt;&lt;C-w&gt;=&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=n>noremap</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=n>silent</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_set_keymap</span><span class=p>(</span><span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;C-e&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;:Fern . -drawer -reveal=% -width=35 -toggle&lt;CR&gt;&lt;C-w&gt;=&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=n>noremap</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=n>silent</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><code>init</code> will load when vim startup.
<code>config</code> function will load when the plugin is loaded.
plugins in <code>dependencies</code> are always lazy-loaded unless the main plugins is loaded.
The benefit os using lazy.nvim is you can lazy load plugins on key, autocmd event, command, filetype. The startup time will be shorter. But most of the time I won&rsquo;t open and close vim oftenly, If I need to run command in shell, I will open a new tmux window, I think it is a good pratice, I would recommend you do so. The reduce of StartupTime is in 10-20 ms in my case compare to using <strong>vim-plug</strong>, really small improvement. But since it is configurate in lua, most of the plugins I recently used provide lua configuration by default, so <strong>lazy.nvim</strong> is convenient a little bit. I don&rsquo;t need to split plugin installation and configuation in two files as used to be in <strong>vim-plug</strong>.</p></details><h2 id=jump-between-files>Jump between files<a hidden class=anchor aria-hidden=true href=#jump-between-files>¶</a></h2><p>I use <a href=https://github.com/junegunn/fzf.vim>fzf.vim</a> to jump between files, I have a notes directory, which is version controlled by git. I can jump files within this directory by fuzzy finding the name of the files. Original <strong>fzf.vim</strong> don&rsquo;t support this feature, it only support find file under current directory by default.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>leader</span><span class=p>&gt;</span><span class=nx>fp</span> :<span class=nx>execute</span> <span class=s1>&#39;Files&#39;</span> <span class=nx>system</span><span class=p>(</span><span class=s1>&#39;git rev-parse --show-toplevel 2&gt; /dev/null&#39;</span><span class=p>)</span>[:<span class=m>-2</span>]<span class=p>&lt;</span><span class=nx>cr</span><span class=p>&gt;</span><span class=err>
</span></span></span></code></pre></div><p>This line use the command <code>Files</code> from <strong>fzf.vim</strong> to fuzzy find the top directory that contain <code>.git/</code>.
demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/fzf-root.gif type alt=fzf-root></p><p>The notes directory can be obsidian vault or any folder sturcture that have the concept of root.</p><details><summary>fzf.vim full config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;junegunn/fzf.vim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;junegunn/fzf&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>keys</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s2>&#34;&lt;leader&gt;f&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span><span class=s2>&#34;&lt;leader&gt;gp&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span> <span class=s2>&#34;&lt;c-l&gt;&#34;</span><span class=p>,</span> <span class=n>mode</span> <span class=o>=</span> <span class=s2>&#34;i&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span> <span class=s2>&#34;&lt;c-f&gt;&#34;</span><span class=p>,</span> <span class=n>mode</span> <span class=o>=</span> <span class=s2>&#34;i&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>cmd</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Files&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;GFiles&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Buffers&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Colors&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Ag&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Rg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;RG&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Lines&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;BLines&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Tags&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;BTags&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Marks&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Jumps&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Windows&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Locate&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;History&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Snippets&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Commits&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;BCommits&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Commands&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Maps&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Helptags&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Filetypes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>build</span> <span class=o>=</span> <span class=s2>&#34;./install --all&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.cmd</span><span class=p>(</span><span class=s>[[
</span></span></span><span class=line><span class=cl><span class=s>            let g:fzf_preview_window = [ &#39;right,50%&#39;, &#39;ctrl-/&#39; ]
</span></span></span><span class=line><span class=cl><span class=s>            let g:fzf_layout         = {&#39;window&#39;: { &#39;width&#39;: 0.9, &#39;height&#39;: 1 }}
</span></span></span><span class=line><span class=cl><span class=s>            let g:fzf_buffers_jump   = 1
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;ff :Files&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fa :Files $HOME&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fp :&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fp :execute &#39;Files&#39; system(&#39;git rev-parse --show-toplevel 2&gt; /dev/null&#39;)[:-2]&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fb :Buffers&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fs :Lines&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;gp :Rg&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;f. :History&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;f/ :History/&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;f: :History:&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fh :Helptags&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>            nnoremap &lt;leader&gt;fc :Commands&lt;cr&gt;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>            &#34;insert relative path of file in project
</span></span></span><span class=line><span class=cl><span class=s>            inoremap &lt;expr&gt; &lt;C-l&gt; fzf#vim#complete#path(&#39;fd --type=file . $(git rev-parse --show-cdup 2&gt; /dev/null)&#39;)
</span></span></span><span class=line><span class=cl><span class=s>            inoremap &lt;expr&gt; &lt;C-f&gt; fzf#vim#complete#path(&#39;fd --type=file . $(git rev-parse --show-toplevel 2&gt; /dev/null)&#39;)
</span></span></span><span class=line><span class=cl><span class=s>            ]]</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Make sure you have <a href=https://github.com/junegunn/fzf>fzf</a> installed with <strong>lazy.nvim</strong>. <code>cmd</code> and <code>keys</code> are lazy loading config, but I find it really useless, as I have say that I rarely open and close vim in very shorttime, I don&rsquo;t care too much StartupTime, those line config are just for fun, when I switch from <strong>vim-plug</strong> to <strong>lazy.nvim</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>l</span><span class=p>&gt;</span> <span class=nx>fzf</span>#<span class=nx>vim</span>#<span class=nx>complete</span>#<span class=nx>path</span><span class=p>(</span><span class=s1>&#39;fd --type=file . $(git rev-parse --show-cdup 2&gt; /dev/null)&#39;</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>f</span><span class=p>&gt;</span> <span class=nx>fzf</span>#<span class=nx>vim</span>#<span class=nx>complete</span>#<span class=nx>path</span><span class=p>(</span><span class=s1>&#39;fd --type=file . $(git rev-parse --show-toplevel 2&gt; /dev/null)&#39;</span><span class=p>)</span><span class=err>
</span></span></span></code></pre></div><p>This first line will insert relative path to file within the root directory that contain <code>.git/</code>.</p><p>This first line will insert full path to file within the root directory that contain <code>.git/</code>.</p><p>I recently use this short vimscript snippets instead of the autocompletion obsidian reference link provided by <strong>obsidian.nvim</strong>, see <a href=#Autocompletion>autocompletion in markdown with vim</a></p></details><h2 id=file-explorer>file explorer<a hidden class=anchor aria-hidden=true href=#file-explorer>¶</a></h2><p>Although fzf is powerful, sometimes I don&rsquo;t remember what is the name of the file. I will use file explorer to navigate to the file I want. I use the plugin <a href=https://github.com/lambdalisue/fern.vim>fern</a>.</p><blockquote><p>Fern (furn) is a general purpose asynchronous tree viewer written in pure Vim script.</p></blockquote><p>It is very simple by default, some feature can be extended with extension/plugins, like preview file or jump to root directory(directory that contain <code>.git/</code>). It support mosue mapping, you can use mouse to open or expand file/directory as you would expect to do in another GUI editor.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>e</span><span class=p>&gt;</span>   <span class=p>&lt;</span><span class=nx>Esc</span><span class=p>&gt;</span>:<span class=nx>Fern</span> . <span class=p>-</span><span class=nx>drawer</span> <span class=p>-</span><span class=nx>reveal</span><span class=p>=</span>% <span class=p>-</span><span class=nx>width</span><span class=p>=</span><span class=m>35</span> <span class=p>-</span><span class=nx>toggle</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>w</span><span class=p>&gt;=</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>e</span><span class=p>&gt;</span>   :<span class=nx>Fern</span> . <span class=p>-</span><span class=nx>drawer</span> <span class=p>-</span><span class=nx>reveal</span><span class=p>=</span>% <span class=p>-</span><span class=nx>width</span><span class=p>=</span><span class=m>35</span> <span class=p>-</span><span class=nx>toggle</span><span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>w</span><span class=p>&gt;=</span><span class=err>
</span></span></span></code></pre></div><p>I can toggle the file explorer with <code>Ctrl-e</code></p><p>demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/file-explorer-mosue.gif type alt=fern-demo></p><p>If you don&rsquo;t like the default key bindings, you can change it in <code>~/.config/nvim/ftplugin/fern.vim</code>. For exmaple I have change some of them. Fern have many API you can interact with, You can delete, rename files and directories like other GUI file finder. I don&rsquo;t make move file key bindings, because I regard it is easier to do with my shell.</p><p>Preview file when navigate files using jk is helpful when sometimes I don&rsquo;t remember what is the content inside, I can toggle this with <code>p</code> in file explorer buffer. In orde to have this function you hvae to install <a href=https://github.com/yuki-yano/fern-preview.vim>fere plugin for preview</a>.</p><p>demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/fern-preview.gif type alt=fern-preview.gif></p><p>Another keymapping I use often are <code>R</code>, it will jump to the root of current directory(directory contain <code>.git/</code>), you will need to install <a href=https://github.com/lambdalisue/fern-mapping-project-top.vim>this fern plugin</a>.</p><details><summary>fern full config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- ~/.config/nvim/lua/plugins/fern.lua</span>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;lambdalisue/fern.vim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;lambdalisue/fern-hijack.vim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;lambdalisue/fern-mapping-project-top.vim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;sokinpui/my-fern-preview.vim&#34;</span><span class=p>,</span>    
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=c1>-- Set the Fern plugin configuration options in Lua</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#mark_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;●&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#collapsed_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;▷ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#expanded_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;▼ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#leading&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#leaf_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39; &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#renderer#default#root_symbol&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;~ &#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_default_mappings&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_drawer_auto_quit&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>[</span><span class=s2>&#34;fern#disable_viewer_hide_cursor&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1>-- Define the key mappings</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_set_keymap</span><span class=p>(</span><span class=s1>&#39;i&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;C-e&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;Esc&gt;:Fern . -drawer -reveal=% -width=35 -toggle&lt;CR&gt;&lt;C-w&gt;=&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=n>noremap</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=n>silent</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_set_keymap</span><span class=p>(</span><span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;C-e&gt;&#39;</span><span class=p>,</span> <span class=s1>&#39;:Fern . -drawer -reveal=% -width=35 -toggle&lt;CR&gt;&lt;C-w&gt;=&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=n>noremap</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span> <span class=n>silent</span> <span class=o>=</span> <span class=kc>true</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The above snippet install the plugins and change the symbol for displying in directory tree</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=c>&#34; ~/.config/nvim/ftplugin/fern.vim</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;&lt;</span><span class=nx>expr</span><span class=p>&gt;</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \ <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>my</span><span class=p>-</span><span class=nx>open</span><span class=p>-</span><span class=nx>expand</span><span class=p>-</span><span class=nx>collapse</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \ <span class=nx>fern</span>#<span class=nx>smart</span>#<span class=nx>leaf</span><span class=p>(</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \   <span class=s2>&#34;\&lt;Plug&gt;(fern-action-open:select)&#34;</span><span class=p>,</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \   <span class=s2>&#34;\&lt;Plug&gt;(fern-action-expand)&#34;</span><span class=p>,</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \   <span class=s2>&#34;\&lt;Plug&gt;(fern-action-collapse)&#34;</span><span class=p>,</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>            \ <span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>new</span><span class=p>-</span><span class=nx>and</span><span class=p>-</span><span class=nx>edit</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>      \ <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>new</span><span class=p>-</span><span class=nx>file</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span>      \ <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>open</span>:<span class=nx>select</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>CR</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>my</span><span class=p>-</span><span class=nx>open</span><span class=p>-</span><span class=nx>expand</span><span class=p>-</span><span class=nx>collapse</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>TAB</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>my</span><span class=p>-</span><span class=nx>open</span><span class=p>-</span><span class=nx>expand</span><span class=p>-</span><span class=nx>collapse</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>&#34;nnoremap &lt;buffer&gt; h &lt;Plug&gt;(fern-action-collapse)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>&#34;nnoremap &lt;buffer&gt; l &lt;Plug&gt;(fern-action-expand)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=m>2</span><span class=p>-</span><span class=nx>LeftMouse</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>my</span><span class=p>-</span><span class=nx>open</span><span class=p>-</span><span class=nx>expand</span><span class=p>-</span><span class=nx>collapse</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>o</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>new</span><span class=p>-</span><span class=nx>and</span><span class=p>-</span><span class=nx>edit</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>nd</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>new</span><span class=p>-</span><span class=nx>dir</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>D</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>remove</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>rn</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>rename</span><span class=p>)</span><span class=nx>l</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>s</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>open</span>:<span class=nx>split</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>v</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>open</span>:<span class=nx>vsplit</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>&#34;nnoremap &lt;buffer&gt; r &lt;Plug&gt;(fern-action-reload)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>nowait</span><span class=p>&gt;</span> <span class=nx>d</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>hidden</span>:<span class=nx>toggle</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>nowait</span><span class=p>&gt;</span> <span class=nx>h</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>leave</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>nowait</span><span class=p>&gt;</span> <span class=nx>l</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>enter</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34;enter project root, contain .git</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>R</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>project</span><span class=p>-</span><span class=nx>top</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34; preview file</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>p</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>preview</span>:<span class=nx>auto</span>:<span class=nx>toggle</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>d</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>preview</span>:<span class=nx>scroll</span>:<span class=nx>down</span>:<span class=nx>half</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>C</span><span class=p>-</span><span class=nx>u</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>action</span><span class=p>-</span><span class=nx>preview</span>:<span class=nx>scroll</span>:<span class=nx>up</span>:<span class=nx>half</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c>
</span></span></span><span class=line><span class=cl><span class=c>&#34;smart [q]uit</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>quit</span><span class=p>-</span><span class=nx>or</span><span class=p>-</span><span class=nx>close</span><span class=p>-</span><span class=nx>preview</span><span class=p>)</span> <span class=nx>fern_preview</span>#<span class=nx>smart_preview</span><span class=p>(</span><span class=s2>&#34;\&lt;Plug&gt;(fern-action-preview:close)&#34;</span><span class=p>,</span> <span class=s2>&#34;:q\&lt;CR&gt;&#34;</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>nnoremap</span> <span class=p>&lt;</span><span class=nx>silent</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>buffer</span><span class=p>&gt;</span> <span class=nx>q</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>fern</span><span class=p>-</span><span class=nx>quit</span><span class=p>-</span><span class=nx>or</span><span class=p>-</span><span class=nx>close</span><span class=p>-</span><span class=nx>preview</span><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>setlocal</span> <span class=nx>norelativenumber</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nx>setlocal</span> <span class=nx>nonumber</span><span class=err>
</span></span></span></code></pre></div><p>The above snippets change the keymap in fern file explorer buffer.
<code>&lt;cr></code>, doubel-click, and <code>tab</code> will expand the directory or open the file.</p><p><code>o</code> will creat new file</p><p><code>nd</code> will create new directory</p><p><code>D</code> will delete file or directory</p><p><code>rn</code> will rename the file or directory</p><p><code>s</code> will open file in split horizontial vim window</p><p><code>v</code> will open file in split vertical vim window</p><p><code>d</code> will show toggle hidden file</p><p><code>h</code> will navigate directory one level up at the directory cursor at</p><p><code>l</code> will navigate directory one level down at the directory cursor at</p><p><code>R</code> will navigate to the root of current directory( contain <code>.git/</code> ), you need to install <a href=https://github.com/lambdalisue/fern-mapping-project-top.vim>this plugin</a></p><p><code>p</code> will toggle file preview, recently rich contents seems to be out of support.</p><p><code>&lt;c-u></code> and <code>&lt;c-d></code> scroll the preview file up and down respectively.</p><p><code>q</code> will close fern buffer or close the preview float window.</p></details><h2 id=synatx-highlight>Synatx highlight<a hidden class=anchor aria-hidden=true href=#synatx-highlight>¶</a></h2><p>Markdown syntax is very simple, even without syntax highlight won&rsquo;t effect writing flow. However, a beautiful syntax highlight just make those special symbol standout, so less mental burden when searching sytnax with eyes. Moreover, you will have beautiful syntax highlihgt in code block.</p><p>I use <a href=https://github.com/nvim-treesitter/nvim-treesitter>nvim-treesitter</a> and <a href=https://github.com/preservim/vim-markdown>vim-markdown</a> together to provide full syntax highlihgt. <strong>vim-markdown</strong> for $Latex$ and <strong>nvim-treesitter</strong> for code block. vim-markdown has option</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=line><span class=cl><span class=k>let</span> <span class=nx>g</span>:<span class=nx>vim_markdown_math</span> <span class=p>=</span> <span class=m>1</span><span class=err>
</span></span></span></code></pre></div><p>to enable syntax highlight for math block in <code>$$</code> or <code>$$ $$</code>. Install treesitter parser <code>markdown</code> with command <code>:TSInstall markown</code>. In order to use treesitter highlight, your color scheme need to support treesitter. I use <a href=https://github.com/navarasu/onedark.nvim>onedark.nvim</a>.
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/syntax-on-off.png type alt=syntax-on-off></p><details><summary>nvim-treesitter full config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- ~/.config/nvim/lua/plugins/treesitter.lua</span>
</span></span><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;nvim-treesitter/nvim-treesitter&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>build</span> <span class=o>=</span> <span class=s2>&#34;:TSUpdate&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span> <span class=p>()</span> 
</span></span><span class=line><span class=cl>            <span class=kd>local</span> <span class=n>configs</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;nvim-treesitter.configs&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>configs.setup</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- 安装 language parser</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- :TSInstallInfo 命令查看支持的语言</span>
</span></span><span class=line><span class=cl>                <span class=n>ensure_installed</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;html&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;css&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;vim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;lua&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;javascript&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;typescript&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;python&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;c&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;java&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;julia&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;query&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=c1>--&#34;markdown_inline&#34;,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;bash&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- 启用代码高亮功能</span>
</span></span><span class=line><span class=cl>                <span class=n>highlight</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>enable</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=c1>--additional_vim_regex_highlighting = false</span>
</span></span><span class=line><span class=cl>                    <span class=n>additional_vim_regex_highlighting</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;markdown&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- 启用增量选择</span>
</span></span><span class=line><span class=cl>                <span class=n>incremental_selection</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>enable</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>keymaps</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=c1>--- init_selection = &#39;&lt;TAB&gt;&#39;,</span>
</span></span><span class=line><span class=cl>                        <span class=n>node_incremental</span> <span class=o>=</span> <span class=s1>&#39;&lt;TAB&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>node_decremental</span> <span class=o>=</span> <span class=s1>&#39;&lt;S-TAB&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=c1>--- scope_incremental = &#39;&lt;TAB&gt;&#39;,</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- 启用基于Treesitter的代码格式化(=) . NOTE: This is an experimental feature.</span>
</span></span><span class=line><span class=cl>                <span class=n>indent</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>enable</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>playground</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>enable</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>disable</span> <span class=o>=</span> <span class=p>{},</span>
</span></span><span class=line><span class=cl>                    <span class=n>updatetime</span> <span class=o>=</span> <span class=mi>25</span><span class=p>,</span> <span class=c1>-- Debounced time for highlighting nodes in the playground from source code</span>
</span></span><span class=line><span class=cl>                    <span class=n>persist_queries</span> <span class=o>=</span> <span class=kc>false</span><span class=p>,</span> <span class=c1>-- Whether the query persists across vim sessions</span>
</span></span><span class=line><span class=cl>                    <span class=n>keybindings</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>toggle_query_editor</span> <span class=o>=</span> <span class=s1>&#39;o&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>toggle_hl_groups</span> <span class=o>=</span> <span class=s1>&#39;i&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>toggle_injected_languages</span> <span class=o>=</span> <span class=s1>&#39;t&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>toggle_anonymous_nodes</span> <span class=o>=</span> <span class=s1>&#39;a&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>toggle_language_display</span> <span class=o>=</span> <span class=s1>&#39;I&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>focus_language</span> <span class=o>=</span> <span class=s1>&#39;f&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>unfocus_language</span> <span class=o>=</span> <span class=s1>&#39;F&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>update</span> <span class=o>=</span> <span class=s1>&#39;R&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>goto_node</span> <span class=o>=</span> <span class=s1>&#39;&lt;cr&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>show_help</span> <span class=o>=</span> <span class=s1>&#39;?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>query_linter</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>enable</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>use_virtual_text</span> <span class=o>=</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>lint_events</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;BufWrite&#34;</span><span class=p>,</span> <span class=s2>&#34;CursorHold&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.wo</span><span class=p>.</span><span class=n>foldmethod</span> <span class=o>=</span> <span class=s1>&#39;expr&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.wo</span><span class=p>.</span><span class=n>foldexpr</span> <span class=o>=</span> <span class=s1>&#39;nvim_treesitter#foldexpr()&#39;</span>
</span></span><span class=line><span class=cl>            <span class=c1>-- 默认不要折叠</span>
</span></span><span class=line><span class=cl>            <span class=c1>-- https://stackoverflow.com/questions/8316139/how-to-set-the-default-to-unfolded-when-you-open-a-file</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.wo</span><span class=p>.</span><span class=n>foldlevel</span> <span class=o>=</span> <span class=mi>99</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;nvim-treesitter/playground&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cmd</span> <span class=o>=</span> <span class=s2>&#34;TSPlaygroundToggle&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>incremental_selection is increat the selected region in visual mode according to treesitter filetype parser. This config is copied from an chinese article <a href=https://zhuanlan.zhihu.com/p/561676059>here</a></p><p>demo:</p></details><h2 id=header-jumps>header jumps<a hidden class=anchor aria-hidden=true href=#header-jumps>¶</a></h2><p><a href=https://github.com/preservim/vim-markdown>vim-markdown</a> provide mapping <code>[[</code> jump to last header above cursor, and <code>]]</code> jump to next header above cursor. Or you prefer a sidebar header TOC, you can use the command <code>Toc</code> to generate a sidebar TOC, you can jump to the header by double click it or press <code>enter</code>.</p><p>Demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/toc.gif type alt=./img/toc.gif></p><h2 id=markdown-preview>Markdown preview<a hidden class=anchor aria-hidden=true href=#markdown-preview>¶</a></h2><p>By me again:</p><blockquote><p>markdown syntax is so simple that you can preview it in your brain.</p></blockquote><p>Mostly the preview is for Math expression, image, video and gif. I will either open browser with <a href=https://github.com/iamcco/markdown-preview.nvim>markown-preivew.nvim</a> or <strong>Obsidian</strong> <del>(Obsidian is the best markdown viewer ever!)</del> to see how my file will be rendered. Obsidian file explorer will show rich content like <code>*.gif</code>, <code>*.png</code> or <code>*.mp4</code>. <del>typora hide them!</del></p><h2 id=image-clipboard-insertion>Image clipboard insertion<a hidden class=anchor aria-hidden=true href=#image-clipboard-insertion>¶</a></h2><p>Paste image from image clipboard to current buffer. Before I know this plugin, whenever I need to paste image, I will open <strong>Obsidian</strong>, because I find their is <a href=https://github.com/reorx/obsidian-paste-image-rename>extension</a> help me. But now I find this plugin, leaving Obsidian merely a markdown reader.
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/image-clipboard.gif type alt=./img/image-clipboard.gif></p><details><summary>vim-markdown, markown-preivew, and image-clipboard full config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;iamcco/markdown-preview.nvim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>build</span> <span class=o>=</span> <span class=s2>&#34;cd app &amp;&amp; npm install&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>ft</span> <span class=o>=</span> <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>cmd</span> <span class=o>=</span> <span class=s2>&#34;MarkdownPreview&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_auto_close</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_open_to_the_world</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_open_ip</span> <span class=o>=</span> <span class=s2>&#34;127.0.0.1&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_port</span> <span class=o>=</span> <span class=s2>&#34;8888&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_browser</span> <span class=o>=</span> <span class=s2>&#34;chromium-browser&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_echo_preview_url</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>mkdp_page_title</span> <span class=o>=</span> <span class=s2>&#34;${name}&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;preservim/vim-markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>ft</span> <span class=o>=</span> <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_folding_disabled</span>        <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_no_default_key_mappings</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_conceal_code_blocks</span>     <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_math</span>                    <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>tex_conceal</span> <span class=o>=</span> <span class=s2>&#34;abmgs&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_conceal</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_toc_autofit</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_follow_anchor</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_toml_frontmatter</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>vim_markdown_strikethrough</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;postfen/clipboard-image.nvim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>keys</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span> <span class=s2>&#34;&lt;leader&gt;i&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;cmd&gt;PasteImg&lt;CR&gt;&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>require</span><span class=s1>&#39;clipboard-image&#39;</span><span class=p>.</span><span class=n>setup</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- Default configuration for all filetype</span>
</span></span><span class=line><span class=cl>                <span class=n>default</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>img_dir</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;%:p:h&#34;</span><span class=p>,</span> <span class=s2>&#34;img&#34;</span><span class=p>},</span> <span class=c1>-- Use table for nested dir (New feature form PR #20)</span>
</span></span><span class=line><span class=cl>                    <span class=n>img_name</span> <span class=o>=</span> <span class=kr>function</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputsave</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=kd>local</span> <span class=n>name</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>input</span><span class=p>(</span><span class=s1>&#39;Name: &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputrestore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=kr>return</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>                    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>affix</span> <span class=o>=</span> <span class=s2>&#34;&lt;</span><span class=se>\n</span><span class=s2>  %s</span><span class=se>\n</span><span class=s2>&gt;&#34;</span> <span class=c1>-- Multi lines affix</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- You can create configuration for ceartain filetype by creating another field (markdown, in this case)</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- If you&#39;re uncertain what to name your field to, you can run `lua print(vim.bo.filetype)`</span>
</span></span><span class=line><span class=cl>                <span class=c1>-- Missing options from `markdown` field will be replaced by options from `default` field</span>
</span></span><span class=line><span class=cl>                <span class=n>markdown</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>img_dir</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;%:p:h&#34;</span><span class=p>,</span> <span class=s2>&#34;img&#34;</span><span class=p>},</span> <span class=c1>-- Use table for nested dir (New feature form PR #20)</span>
</span></span><span class=line><span class=cl>                    <span class=n>img_name</span> <span class=o>=</span> <span class=kr>function</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputsave</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=kd>local</span> <span class=n>name</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>input</span><span class=p>(</span><span class=s1>&#39;Name: &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputrestore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=kr>return</span> <span class=n>name</span>
</span></span><span class=line><span class=cl>                    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>img_handler</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;normal! f[&#34;</span><span class=p>)</span> <span class=c1>-- go to [</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;normal! a&#34;</span> <span class=o>..</span> <span class=n>img.name</span><span class=p>)</span> <span class=c1>-- append text with image name</span>
</span></span><span class=line><span class=cl>                    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>affix</span> <span class=o>=</span> <span class=s2>&#34;![](%s)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lervag/lists.vim&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>ft</span> <span class=o>=</span> <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;ListsEnable&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>image-clipboard will insert image from clipboard when if you press <code>&lt;leader>i</code> in normal mode,</p><p>Those line will prompt the name before paste</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>img_name</span> <span class=o>=</span> <span class=kr>function</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputsave</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>name</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>input</span><span class=p>(</span><span class=s1>&#39;Name: &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>vim.fn</span><span class=p>.</span><span class=n>inputrestore</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>name</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></div><p>Those line keep the alt-text same as the image</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>img_handler</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>img</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;normal! f[&#34;</span><span class=p>)</span> <span class=c1>-- go to [</span>
</span></span><span class=line><span class=cl>    <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;normal! a&#34;</span> <span class=o>..</span> <span class=n>img.name</span><span class=p>)</span> <span class=c1>-- append text with image name</span>
</span></span><span class=line><span class=cl><span class=kr>end</span><span class=p>,</span>
</span></span></code></pre></div><p>This line will store the image in the subfolder <code>img/</code> at the directory current file at. If <code>img/</code> don&rsquo;t exist, it will be created</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=n>img_dir</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;%:p:h&#34;</span><span class=p>,</span> <span class=s2>&#34;img&#34;</span><span class=p>},</span> <span class=c1>-- Use table for nested dir (New feature form PR #20)</span>
</span></span></code></pre></div></details><h2 id=autocompletion>Autocompletion<a hidden class=anchor aria-hidden=true href=#autocompletion>¶</a></h2><p>The main reason I use an code editor for markdown editing even It don&rsquo;t provide live preview.</p><p>Worth to mention again:</p><blockquote><p>markdown syntax is so simple that you can preview it in your brain.</p></blockquote><p>The cost of drop live preview compare to have autocompletion is nearly zero. With autocompletion, I can be lazy to type, complete the long words occur more than once. Use snippets to insert pre-defined contents. Recently, I have switch from <a href=https://github.com/neoclide/coc.nvim>coc.nvim</a> to <a href=https://github.com/hrsh7th/nvim-cmp>nvim-cmp</a> for the plugin <a href=https://github.com/epwalsh/obsidian.nvim>obsidian.nvim</a> to insert reference link. <del>BTW, I find it nearly useles</del></p><p>demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/autocompletion.gif type alt=./img/autocompletion.gif></p><details><summary>autocompletion with nvim-cmp full config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;SirVer/ultisnips&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>init</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>UltiSnipsExpandTrigger</span> <span class=o>=</span> <span class=s2>&#34;&lt;C-j&gt;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>UltiSnipsJumpForwardTrigger</span> <span class=o>=</span> <span class=s2>&#34;&lt;C-j&gt;&#34;</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>UltiSnipsJumpBackwardTrigger</span> <span class=o>=</span> <span class=s2>&#34;&lt;C-k&gt;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;hrsh7th/nvim-cmp&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>event</span> <span class=o>=</span> <span class=s2>&#34;InsertEnter&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hrsh7th/cmp-buffer&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;FelipeLema/cmp-async-path&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hrsh7th/cmp-nvim-lsp&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=c1>--&#39;hrsh7th/cmp-cmdline&#39;,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;hrsh7th/cmp-calc&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s1>&#39;onsails/lspkind-nvim&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;quangnguyen30192/cmp-nvim-ultisnips&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                    <span class=c1>-- optional call to setup (see customization section)</span>
</span></span><span class=line><span class=cl>                    <span class=n>require</span><span class=p>(</span><span class=s2>&#34;cmp_nvim_ultisnips&#34;</span><span class=p>).</span><span class=n>setup</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>                <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>str</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=kr>return</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_replace_termcodes</span><span class=p>(</span><span class=n>str</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kd>local</span> <span class=n>has_words_before</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=kd>local</span> <span class=n>line</span><span class=p>,</span> <span class=n>col</span> <span class=o>=</span> <span class=n>unpack</span><span class=p>(</span><span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_win_get_cursor</span><span class=p>(</span><span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                <span class=kr>return</span> <span class=n>col</span> <span class=o>~=</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_buf_get_lines</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>line</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>line</span><span class=p>,</span> <span class=kc>true</span><span class=p>)[</span><span class=mi>1</span><span class=p>]:</span><span class=n>sub</span><span class=p>(</span><span class=n>col</span><span class=p>,</span> <span class=n>col</span><span class=p>):</span><span class=n>match</span><span class=p>(</span><span class=s2>&#34;%s&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>            <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kd>local</span> <span class=n>cmp</span> <span class=o>=</span> <span class=n>require</span> <span class=s1>&#39;cmp&#39;</span>
</span></span><span class=line><span class=cl>            <span class=c1>--local lspkind = require(&#39;lspkind&#39;)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>cmp.setup</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>snippet</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>expand</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=n>vim.fn</span><span class=p>[</span><span class=s2>&#34;UltiSnips#Anon&#34;</span><span class=p>](</span><span class=n>args.body</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>sources</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;buffer&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>keyword_length</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>option</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=n>keyword_length</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=n>keyword_pattern</span> <span class=o>=</span> <span class=s>[[\k\+]]</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                            <span class=n>get_bufnrs</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                                <span class=kr>return</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_list_bufs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                    <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;nvim_lsp&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s2>&#34;ultisnips&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=c1>--{ name = &#39;cmdline&#39; },</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;async_path&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;calc&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>mapping</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>.</span><span class=n>preset.insert</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=p>[</span><span class=s1>&#39;&lt;c-e&gt;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                        <span class=n>i</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>fallback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=n>cmp.close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=n>fallback</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span>
</span></span><span class=line><span class=cl>                    <span class=p>}),</span>
</span></span><span class=line><span class=cl>                    <span class=p>[</span><span class=s2>&#34;&lt;Tab&gt;&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                        <span class=n>i</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>fallback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_next_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Insert</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>elseif</span> <span class=n>has_words_before</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.complete</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>fallback</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>}),</span>
</span></span><span class=line><span class=cl>                    <span class=p>[</span><span class=s2>&#34;&lt;S-Tab&gt;&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                        <span class=n>i</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>fallback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_prev_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Insert</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>fallback</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=p>}),</span>
</span></span><span class=line><span class=cl>                    <span class=p>[</span><span class=s1>&#39;&lt;C-n&gt;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                        <span class=n>c</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_next_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Select</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_feedkeys</span><span class=p>(</span><span class=n>t</span><span class=p>(</span><span class=s1>&#39;&lt;Down&gt;&#39;</span><span class=p>),</span> <span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>i</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>fallback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_next_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Select</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>fallback</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span>
</span></span><span class=line><span class=cl>                    <span class=p>}),</span>
</span></span><span class=line><span class=cl>                    <span class=p>[</span><span class=s1>&#39;&lt;C-p&gt;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>cmp.mapping</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                        <span class=n>c</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_prev_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Select</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_feedkeys</span><span class=p>(</span><span class=n>t</span><span class=p>(</span><span class=s1>&#39;&lt;Up&gt;&#39;</span><span class=p>),</span> <span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                        <span class=n>i</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>fallback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=kr>if</span> <span class=n>cmp.visible</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                                <span class=n>cmp.select_prev_item</span><span class=p>({</span> <span class=n>behavior</span> <span class=o>=</span> <span class=n>cmp.SelectBehavior</span><span class=p>.</span><span class=n>Select</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>                            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                                <span class=n>fallback</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                            <span class=kr>end</span>
</span></span><span class=line><span class=cl>                        <span class=kr>end</span>
</span></span><span class=line><span class=cl>                    <span class=p>}),</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>cmp.setup</span><span class=p>.</span><span class=n>cmdline</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>completion</span> <span class=o>=</span> <span class=p>{</span> <span class=n>autocomplete</span> <span class=o>=</span> <span class=kc>false</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=n>sources</span> <span class=o>=</span> <span class=n>cmp.config</span><span class=p>.</span><span class=n>sources</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;async_path&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;cmdline&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=p>})</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>You can interrupt <strong>nvim-cmp</strong> as the front end, it only provide UI, the source for completion is the backend, where you have to install separately,</p><p>complete words occured in buffer, the <code>get_bufnrs</code> function allows you complete words from all opened buffers.(by default only complete words from current buffer)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span> <span class=o>=</span> <span class=s1>&#39;buffer&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>keyword_length</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>option</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>keyword_length</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>keyword_pattern</span> <span class=o>=</span> <span class=s>[[\k\+]]</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>get_bufnrs</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_list_bufs</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span>
</span></span></code></pre></div><p>The source <code>calc</code> can handle some simple math calculation.</p><p><code>async_path</code> will complete directory asynchronous, so won&rsquo;t cause lag when the size of directory is too big.</p><p><code>&lt;Tab></code> and <code>&lt;S-Tab></code> will complete words on suggest menu, You don&rsquo;t have to press <code>&lt;CR></code> to confirm.</p><p><code>&lt;C-j></code> will expand snippets and jump to next snippets cursor holder</p><p><code>&lt;C-k></code> will jump to previous snippets cursor holder</p><p><code>&lt;C-e></code> will close the menu</p></details><h2 id=text-object-for-markdown>text object for markdown<a hidden class=anchor aria-hidden=true href=#text-object-for-markdown>¶</a></h2><p>Extend text object in markdown, I found <a href=https://github.com/coachshea/vim-textobj-markdown#code-fences>this plugin: text object for markdown</a>, the code block text object provide by it is extremely useful. It use api from another plugin <a href=https://github.com/kana/vim-textobj-user>vim-textobj-user</a>.
demo
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/text-object.gif type alt=./img/text-object.gif></p><details><summary>text object plugin config</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kr>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;coachshea/vim-textobj-markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>dependencies</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;kana/vim-textobj-user&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=n>ft</span> <span class=o>=</span> <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>config</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.g</span><span class=p>.</span><span class=n>textobj_markdown_no_default_key_mappings</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.cmd</span><span class=p>(</span><span class=s>[[
</span></span></span><span class=line><span class=cl><span class=s>            onoremap ic &lt;plug&gt;(textobj-markdown-Bchunk-i)
</span></span></span><span class=line><span class=cl><span class=s>            onoremap ac &lt;plug&gt;(textobj-markdown-Bchunk-a)
</span></span></span><span class=line><span class=cl><span class=s>            vnoremap ic &lt;plug&gt;(textobj-markdown-Bchunk-i)
</span></span></span><span class=line><span class=cl><span class=s>            vnoremap ac &lt;plug&gt;(textobj-markdown-Bchunk-a)
</span></span></span><span class=line><span class=cl><span class=s>            ]]</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details><h1 id=zsh>zsh<a hidden class=anchor aria-hidden=true href=#zsh>¶</a></h1><p>Since using neovim in terminal, some shell hack is required to make writing even more comfortable. I don&rsquo;t use Neovim terminal, its color never display same as my original terminal. Instead, I use tmux new window if I needed. I don&rsquo;t do fancy file management with my Neovim file explorer because I prefer to manage them in shell.</p><p>The last required configuration of zsh are merely tab completion and remapping the fully sucked tmux default key bindings.</p><p>For zsh completion, I would recommend you read <a href=https://thevaluable.dev/zsh-completion-guide-examples/>this blog detaily cover about zsh completion</a></p><p>For tmux configuration guide, I would recommend you read <a href=https://thevaluable.dev/tmux-config-mouseless/>this blog detaily cover about configure tmux</a></p><h1 id=may-not-helpful>May not helpful<a hidden class=anchor aria-hidden=true href=#may-not-helpful>¶</a></h1><h2 id=conceal>conceal<a hidden class=anchor aria-hidden=true href=#conceal>¶</a></h2><p>Hide the syntax when cursor is not at the line, maybe helpful or not. Vim has this function built-in, you can set <code>set conceallevel=2</code>. vim-markdown also have options that control concealment for different group, they are:</p><p><code>let g:vim_markdown_math = 1</code> to enalbe concealment for $Latex$ syntax</p><p><code>let g:tex_conceal = "abmgs"</code> to set the concealment options for tex object in both markdown and tex file, see <code>:help tex_conceal</code> to see details of options.</p><p><code>let g:vim_markdown_conceal_code_blocks = 1</code> to enalbe concealment for code block delimiter.</p><p><code>let g:vim_markdown_strikethrough = 1</code> to enable concealment for Strikethrough. <em>This featuer don&rsquo;t require conceallevel set in vim</em>
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/strikethrough.png type alt=strikethrough></p><p>Demo
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/conceal.gif type alt=./conceal.gif></p><h2 id=auto-list-in-vim>Auto list in vim<a hidden class=anchor aria-hidden=true href=#auto-list-in-vim>¶</a></h2><p>Since most of the GUI markdown editor support auto generate list when you hit enter. I found one plugin <a href=https://github.com/dkarter/bullets.vim>bullets.vim</a>. It will auto insert list base on the list symbol last line used. Quite helpful when you insert orderlist. But it seems to break your <code>&lt;CR></code> in other plugins, but just fine with me, please see <a href=https://www.reddit.com/r/neovim/comments/nx4s7g/is_there_an_actually_good_numbered_list_plugin/>this discussion on reddit</a>
Demo:
<img loading=lazy src=/Blog/post/vim4-markdownwritingsetup/img/list.gif type alt=./img/list.gif></p><h2 id=searching>Searching<a hidden class=anchor aria-hidden=true href=#searching>¶</a></h2><p>I will open <strong>Obsidian</strong> and use its search box. Sometimes I will open new tmux windows and search with <a href=https://github.com/BurntSushi/ripgrep>rg(ripgrep)</a></p><h1 id=after>After<a hidden class=anchor aria-hidden=true href=#after>¶</a></h1><p>As you see, the markdown system built in this blog is totally offline, so that you can choose the tools for different task, like A code editor over in editing, a notes taking app over in reading rich content. I do use some cloud based notes app like notion, However, it often lag, and low in protability, the file is difficult to edit outside it. I am forced to use the function provided by single application. I prefer offline solution than cloud based for markdown writing.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://sokinpui.github.io/Blog/post/vim5-plugin-autopairs/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Neovim plugins recommendation: Auto pair and multi cursor</span></a>
<a class=next href=https://sokinpui.github.io/Blog/post/vim3-xdgforvim/><span class=title>Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span><br><span>XDG base configuration for Vim</span></a></nav></footer><div class=comments-separator></div></article></main><footer class=footer><span>&copy; 2023 <a href=https://sokinpui.github.io/Blog/>Home</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></span>
<span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
    <a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n="1"=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/Blog/js/medium-zoom.min.js data-no-instant></script>
<script>(function(){const a="1"=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script><script src=/Blog/js/instantclick.min.js data-no-instant></script>
<script data-no-instant>InstantClick.init()</script></body></html>